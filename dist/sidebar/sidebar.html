<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlowFocus</title>
    <link rel="stylesheet" href="sidebar.css">
</head>
<body>
    <div class="container">
        <!-- 标签页导航 -->
        <div class="tab-navigation">
            <button id="tableConfigTab" class="tab-button active">多维表格配置</button>
            <button id="modelConfigTab" class="tab-button">大模型配置</button>
            <button id="rewriteTab" class="tab-button">改写功能</button>
        </div>

        <!-- 多维表格配置标签页 -->
        <div id="tableConfigPanel" class="tab-panel active">
            <h2>多维表格配置</h2>
            
            <div class="form-group">
                <label for="tableConfigName">配置名称：</label>
                <input type="text" id="tableConfigName" placeholder="请输入配置名称">
            </div>
            
            <div class="form-group">
                <label for="tablePlatform">选择平台：</label>
                <select id="tablePlatform">
                    <option value="feishu">飞书多维表格</option>
                    <option value="dingtalk">钉钉智能表格</option>
                    <option value="wework">企业微信智能表格</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="tableAppId">应用ID：</label>
                <input type="text" id="tableAppId" placeholder="请输入应用ID">
            </div>
            
            <div class="form-group">
                <label for="tableAppSecret">应用密钥：</label>
                <input type="password" id="tableAppSecret" placeholder="请输入应用密钥">
            </div>
            
            <div class="form-group">
                <label for="tableId">表格ID：</label>
                <input type="text" id="tableId" placeholder="请输入表格ID">
                <input type="hidden" id="tableConfigId">
            </div>
            
            <div class="button-group">
                <button id="saveTableConfigBtn">保存配置</button>
                <button id="testTableConnectionBtn">测试连接</button>
            </div>
            
            <div class="history-configs">
                <div class="history-header">
                    <label><input type="checkbox" id="selectAllTableConfigs"> 全部</label>
                    <button id="batchSyncTableConfigsBtn">批量同步</button>
                    <button id="deleteSelectedTableConfigsBtn">批量删除</button>
                </div>
                <div id="tableConfigsList" class="configs-list">
                    <div class="empty-message">暂无配置</div>
                </div>
            </div>
        </div>

        <!-- 大模型配置标签页 -->
        <div id="modelConfigPanel" class="tab-panel">
            <h2>大模型配置</h2>
            
            <div class="form-group">
                <label for="configName">配置名称：</label>
                <input type="text" id="configName" placeholder="请输入配置名称">
            </div>
            
            <div class="form-group">
                <label for="modelType">选择大模型：</label>
                <select id="modelType">
                    <option value="qwen">Qwen</option>
                    <option value="deepseek">DeepSeek</option>
                    <option value="volces">Volces</option>
                    <option value="kimi">Kimi</option>
                    <option value="hunyuan">Hunyuan</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="apiKey">API Key：</label>
                <input type="password" id="apiKey" placeholder="请输入API密钥">
            </div>
            
            <div class="form-group">
                <label for="baseUrl">Base URL：</label>
                <input type="text" id="baseUrl" placeholder="请输入基础URL">
            </div>
            
            <div class="form-group">
                <label for="modelEndpoint">模型端点：</label>
                <input type="text" id="modelEndpoint" placeholder="请输入模型端点">
                <input type="hidden" id="configId">
            </div>
            
            <div class="button-group">
                <button id="saveConfigBtn">保存配置</button>
                <button id="testConnectionBtn">测试连接</button>
            </div>
            
            <div class="history-configs">
                <div class="history-header">
                <label><input type="checkbox" id="selectAllConfigs"> 全部</label>
                <button id="batchSyncConfigsBtn">批量同步</button>
                <button id="deleteSelectedConfigsBtn">批量删除</button>
            </div>
                <div id="configsList" class="configs-list">
                    <!-- 配置列表将通过JavaScript动态生成 -->
                    <div class="empty-message">暂无配置</div>
                </div>
            </div>
        </div>

        <!-- 改写功能标签页 -->
        <div id="rewritePanel" class="tab-panel">
            <h2>改写功能</h2>
            
            <div class="form-group">
                <label for="rewriteName">改写工作名称：</label>
                <input type="text" id="rewriteName" placeholder="请输入改写工作名称">
                <input type="hidden" id="recordId">
            </div>
            
            <div class="form-group">
                <label>网页原文：</label>
                <div class="text-container">
                    <textarea id="originalText" placeholder="网页原文将显示在这里"></textarea>
                </div>
                <div class="button-group">
                    <button id="getSelectedTextBtn">获取选中文字</button>
                    <button id="copyOriginalBtn">📋 复制原文</button>
                    <button id="clearOriginalBtn">🗑️ 清空</button>
                </div>
            </div>
            
            <div class="form-group">
                <label for="modelSelect">大模型：</label>
                <select id="modelSelect">
                    <option value="">请先添加模型配置</option>
                </select>
                
                <label>改写提示词：</label>
                <div class="text-container">
                    <textarea id="rewritePrompt" placeholder="请将以下文本改写得更加正式和专业..."></textarea>
                </div>
                <div class="button-group">
                    <button id="startRewriteBtn">🔄 开始改写</button>
                    <button id="clearPromptBtn">🗑️ 清空</button>
                </div>
            </div>
            
            <div class="form-group">
                <label>改写结果：</label>
                <div class="text-container">
                    <textarea id="rewriteResult" placeholder="改写结果将显示在这里"></textarea>
                </div>
                <div class="button-group">
                    <button id="copyResultBtn">📋 复制改写结果</button>
                    <button id="saveResultBtn">💾 保存</button>
                </div>
            </div>
            
            <div class="history-records">
                <div class="history-header">
                    <label class="checkbox-label"><input type="checkbox" id="selectAllRecords"> 全部</label>
                    <button id="deleteSelectedRecordsBtn">删除</button>
                </div>
                <div id="recordsList" class="records-list">
                    <!-- 改写记录列表将通过JavaScript动态生成 -->
                    <div class="empty-message">暂无记录</div>
                </div>
            </div>
        </div>


    </div>

    <!-- 同步对话框 -->
    <div id="syncDialog" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="syncDialogTitle">多维表格配置信息同步设置</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="sync-info">
                    <div class="info-item">
                        <label>选中的同步记录数:</label>
                        <span id="selectedRecordsCount">共 1 条</span>
                    </div>
                    <div class="info-item">
                        <label>选中的记录配置名称:</label>
                        <span id="selectedConfigNames">[当前选择的多维表格配置名称]</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="targetConfigSelect">配置同步目的链接:</label>
                    <select id="targetConfigSelect">
                        <option value="">请选择同步目的链接</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="targetTableInput">配置同步目的表格:</label>
                    <input type="text" id="targetTableInput" placeholder="请输入同步目的表格名称">
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelSyncBtn" class="btn-secondary">取消</button>
                <button id="confirmSyncBtn" class="btn-primary">确定</button>
            </div>
        </div>
    </div>

    <!-- 加载JavaScript文件 -->
    <script type="module" src="sidebar.js"></script>
</body>
</html>